<html ng-app="IMDB">
	<head>
		<meta http-equiv="cache-control" content="max-age=0">
		<meta http-equiv="cache-control" content="no-cache">
		<meta http-equiv="expires" content="-1">
		<meta http-equiv="expires" content="Tue, 01 Jan 1980 11:00:00 GMT">
		<meta http-equiv="pragma" content="no-cache">
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" viewport="">
		<title>IMDB</title>		
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<script src="js/angular.min.js"></script>		
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular-touch.js"></script>		
		<script src="js/angular-dragdrop.min.js"></script>	
		<script src="js/jquery-ui.js"></script>
		<link rel="stylesheet" href="style/jquery-ui.structure.css">
		<link rel="stylesheet" href="style/jquery-ui.theme.css">
		<script src="js/interface.js"></script>
		<script src="js/javacrypt.js"></script>
		<script src="js/imdb.js"></script>
		<script src="js/controller/mercatoController.js"></script>	
		<script src="js/slick.js"></script>	
		<link rel="stylesheet" href="style/style_mobile.css">
		<link rel="stylesheet" href="style/style_tablet.css">
		<link rel="stylesheet" href="style/style.css">
		<link rel="stylesheet" href="style/slick.css">
		<link rel="stylesheet" href="style/slick-theme.css">
	</head>
	<body ng-controller="mercatoCtrl">
		<div class="imdb-overlay"></div>
		<div id="wrapper">
			<div class="imdb-results__loading2" data-ng-show="loading"></div>
			<div class="imdb-results__loading" data-ng-show="loading"></div>
			<div data-ng-hide="loading">
				
				<div class="inv-roseMrc">
					<div class="menuContainer">
						<img class="logoSquadraMrc" ng-class="{selected : $index==-1}" id="squadra-{{squadra.idSquadra}}" ng-repeat="squadra in squadre" alt="" ng-src="{{squadra.logo}}" ng-click="inserisciPassword(squadra)">
					</div>
					<div id="divPassword" class="imdb-detail-overlay imdb-gutter imdb-overlay-div">
						<div class="imdb-detail-overlay__close imdb-close-icon"	data-ng-click="closePasswordDiv()"></div>
						<h2 class="imdb-detail-overlay__title">{{squadraSelected.nome}}</h2>						
						<div class="imdb-detail-overlay__content imdb-gutter-v">
							<form>
								<span class="imdb-left">Password: </span>
								<input type="password" name="password" class="imdb-left imdb-password" autofocus tabindex="1" />
								<input type="submit" value="Invia" data-ng-click="verificaPassword(squadraSelected.password)" class="imdb-right imdb-invia-btn" tabindex="2" />
								<br />
								<span class="imdb-error" data-ng-hide="inviabile">Password non valida</span>
							</form>
						</div>
					</div>
			         <div ng-repeat="calciatore in rosa.rosa" class="squadraMercato"  ng-click="selezionaCalciatore({{calciatore.idFcm}})">
			         	<input style="color:white; display:none" type="checkbox" ruolo="{{calciatore.ruolo}}" name="srcSelected" value="{{calciatore.idFcm}}" nome="{{calciatore.nomeAbbr}}" />{{calciatore.nomeAbbr}}
			         </div>			
				</div>
				
				<div class="verticalLine">		
					<div ng-hide="proposte.length==0" >
						<div class="propContainer" ng-click="toggleViewProposte()">
							<span class="numProposta">{{proposte.length}}</span>
						 	<img class="imgProposta" src="images/scambio-icon.jpg"/>
						 </div>
						<div ng-class="{'imdb-visible' : viewProposte}" class="imdb-detail-overlay imdb-gutter imdb-overlay-div">
							<div class="imdb-detail-overlay__close imdb-close-icon"	data-ng-click="closePropostaDiv()"></div>
							<div class="divProposte">
							        <div ng-repeat="proposta in proposte">
							        	<div>Proposta ricevuta da {{proposta.squadraSrc.nome}}</div>
										<div style="float:left; width:50%; text-align: left">
											<p ng-repeat="calciatoreSrc in proposta.giocatoriSrc track by $index">{{getAbbreviazioneRuolo(calciatoreSrc.ruolo)}} - {{calciatoreSrc.nomeAbbr}}</p>
										</div>
										<div style="float:left; width:50%; text-align: right">
											<p ng-repeat="calciatoreDst in proposta.giocatoriDst track by $index">{{getAbbreviazioneRuolo(calciatoreDst.ruolo)}} - {{calciatoreDst.nomeAbbr}}</p>
										</div>
										<div style="width:100%">
											<div>
												<img src="images/yes.jpg" style="width: 50px; cursor: pointer; display: -webkit-inline-box;" ng-click="accettaProposta(proposta)"></img>
												<img src="images/no.jpg" style="width: 50px; cursor: pointer; display: -webkit-inline-box;" ng-click="rifiutaProposta(proposta)"></img>
											</div>
										</div>
							        </div>
							</div>
						</div>
					</div>
				</div>
				
				<div class="inv-roseMrc" data-ng-hide="!rosa">
					<div class="menuContainer">
						<img  class="logoSquadraMrc" id="squadra-{{squadra.idSquadra}}" ng-repeat="squadra in squadre | filter:{ idSquadra: '!' + squadraSelected.idSquadra}" alt="" ng-src="{{squadra.logo}}" ng-click="mostraRosa(squadra.idSquadra)">
					</div>
					<div ng-repeat="calciatoreDst in rosaDst.rosa" class="squadraMercato" ng-click="selezionaCalciatore({{calciatoreDst.idFcm}})">
			         	<input style="color:white; display:none" type="checkbox" ruolo="{{calciatoreDst.ruolo}}" name="dstSelected" value="{{calciatoreDst.idFcm}}" nome="{{calciatore.nomeAbbr}}" />{{calciatoreDst.nomeAbbr}}
			         </div>			
				</div>
				<div style="text-align:center; color:white" ng-show="squadraSelected && squadraDst">
					<input placeholder="Dare" type="text" ng-model="srcMoney"> 
					<button ng-click="richiediScambio()">Richiedi Scambio</button>
					<input placeholder="Avere" type="text" ng-model="dstMoney">
				</div>
				<div id="divConferma" class="imdb-detail-overlay imdb-gutter imdb-overlay-div">
					<div class="imdb-detail-overlay__close imdb-close-icon"
						data-ng-click="closeConfermaDiv()"></div>
					<h2 class="imdb-detail-overlay__title" id="confermaTitle"></h2>						
					<div class="imdb-detail-overlay__content imdb-gutter-v">
						<span class="imdb-singleerror" id="confermaText"></span>										
					</div>
				</div>	
			</div>
		</div>
	</body>
</html>